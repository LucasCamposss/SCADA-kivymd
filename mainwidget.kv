#:kivy 1.11.1
<MyWidget>:
    BoxLayout:
        orientation:'vertical'
        MDToolbar:
            title: "Supervisório Esteira v0.10"
        MDBottomNavigation:
            panel_color: app.theme_cls.accent_color
            text_color_normal: 0.4,0.4,0.4,1
            text_color_active: 0.8,0.8,0.8,1
            MDBottomNavigationItem:
                name:"home"
                text: "HOME"
                icon: 'home'
                MDFloatLayout:
                    orientation: 'vertical'
                    padding: "20dp"
                    spacing: "50dp"
                    
                            
                    MDBoxLayout:
                    
                        md_bg_color: 0,0,0,1
                        size_hint: (0.3602,0.48)
                        pos_hint: {"x":0.035,"y":0.5}
                  

                    BoxLayout:
                        
                        size_hint: (0.35,0.46)
                        pos_hint: {"x":0.04,"y":0.51}
                        orientation:'vertical'
                        
                    
                        TimeSeriesGraph:

                            id:graph1
                            xlabel:'   '
                            background_color: app.theme_cls.bg_normal
                            border_color: 0,0,0,1
                            tick_color: 0,0,0,1
                            font_size: 10
                            x_ticks_minor: 1
                            x_ticks_major: 10
                            y_ticks_major: 100
                            y_grid_label: True
                            x_grid_label: False
                            padding: 5
                            x_grid: True
                            y_grid: True
                            xmin: 0
                            xmax: 50
                            ymin: 0
                            ymax:300

                        TimeSeriesGraph:
                            id:graph2
                            xlabel:'Horário'
                            background_color: app.theme_cls.bg_normal
                            border_color: 0,0,0,1
                            tick_color: 0,0,0,1
                            font_size: 10
                            x_ticks_minor: 1
                            x_ticks_major: 10
                            y_ticks_major: 5
                            y_grid_label: True
                            x_grid_label: True
                            padding: 8
                            x_grid: True
                            y_grid: True
                            xmin: 0
                            xmax: 50
                            ymin: 0
                            ymax:15
                            

                    Image: 
                        source: "img/sistema2.png"
                        pos_hint: {"center_x":0.5,"center_y":0.5}
                        size_hint:(1,1)

                    MDFloatLayout:

                        id:caixa
                        pos_hint: {'x': 0.452, 'y': 0.82}
                        size_hint: (0.0,0.0)
                        md_bg_color: 0,0,0,1

                        MDBoxLayout:
                            id: interior
                            md_bg_color: 1,1,1,1
                            size_hint: (0.9,0.9)
                            pos_hint: {"center_x":0.5,"center_y":0.5}

                    

                    MDFloatLayout:

                        id:caixa1
                        pos_hint: {'x': 0.452, 'y': 0.82}
                        size_hint: (0.0,0.0)
                        md_bg_color: 0,0,0,1

                        MDBoxLayout:
                            id: interior1
                            md_bg_color: 1,1,1,1
                            size_hint: (0.9,0.9)
                            pos_hint: {"center_x":0.5,"center_y":0.5}
                    Image: 
                        source: "img/classificador1.png"
                        pos_hint: {"center_x":0.49,"center_y":0.433}
                        size_hint:(1.05,1.05)
                        
                    MDLabel:
                        text: 'Esteira'
                        pos_hint: {"x":0.85,"y":0.44}
                    MDLabel:
                        text: 'Atuador'
                        pos_hint: {"x":0.85,"y":0.34}                  
                    MDIconButton:
                        id: bt_DesligaLiga
                        icon: "light-switch"
                        pos_hint: {"x":0.92,"y":0.9}
                        md_bg_color: 0,1,0,1
                        on_release: root.esteiraAtuar()
                    MDIconButton:
                        id: estado_atuador
                        icon: "light-switch"
                        pos_hint: {"x":0.92,"y":0.8}
                        md_bg_color: "red"
                        on_release: root.atuadorAtuar()
                   
                    MDLabel:
                        text: 'Frequencia Desejada:'
                        pos_hint: {"x":0.58,"y":0.34} 
                    MDLabel:
                        text: '[Hz]'
                        pos_hint: {"x":0.8,"y":0.34} 
                    
                    MDLabel:
                        id:freq_des
                        text: '---'
                        pos_hint: {"x":0.75,"y":0.34} 
                    MDLabel:
                        text: 'Frequencia Medida:'
                        pos_hint: {"x":0.58,"y":0.3}
                    MDLabel:
                        text: '[Hz]'
                        pos_hint: {"x":0.8,"y":0.3} 
                    
                    MDLabel:
                        id:freq_mot
                        text: '---'
                        pos_hint: {"x":0.75,"y":0.3}  
                    MDLabel:
                        text: 'Tensão da rede:'
                        pos_hint: {"x":0.58,"y":0.26} 
                    MDLabel:
                        text: '[V]'
                        pos_hint: {"x":0.8,"y":0.26} 
                    
                    MDLabel:
                        id:tensao
                        text: '---'
                        pos_hint: {"x":0.75,"y":0.26} 
                    MDLabel:
                        text: 'Rotação do Motor:'
                        pos_hint: {"x":0.58,"y":0.22}
                    MDLabel:
                        text: '[RPM]'
                        pos_hint: {"x":0.8,"y":0.22} 
                    
                    MDLabel:
                        id:rotacao
                        text: '---'
                        pos_hint: {"x":0.75,"y":0.22}  
                    MDLabel:
                        text: 'Potencia Ativa Ent. Inv.:'
                        pos_hint: {"x":0.58,"y":0.18} 
                    MDLabel:
                        text: '[W]'
                        pos_hint: {"x":0.8,"y":0.18} 
                    
                    MDLabel:
                        id:pot_entrada
                        text: '---'
                        pos_hint: {"x":0.75,"y":0.18} 
                    MDLabel:
                        text: 'Corrente entrada inv.:'
                        pos_hint: {"x":0.58,"y":0.14} 
                    MDLabel:
                        text: '[A]'
                        pos_hint: {"x":0.8,"y":0.14} 
                    
                    MDLabel:
                        id: corrente
                        text: '---'
                        pos_hint: {"x":0.75,"y":0.14} 
                    MDLabel:
                        text: 'Temperarura do estator:'
                        pos_hint: {"x":0.58,"y":0.10} 
                    MDLabel:
                        text: '[°C]'
                        pos_hint: {"x":0.8,"y":0.10} 
                    
                    MDLabel:
                        id: temp_estator
                        text: '---'
                        pos_hint: {"x":0.75,"y":0.10} 
                    MDLabel:
                        text: 'Velocidade Esteira:'
                        pos_hint: {"x":0.58,"y":0.06} 
                    MDLabel:
                        text: '[m/s]'
                        pos_hint: {"x":0.8,"y":0.06} 
                    
                    MDLabel:
                        id: vel_esteira
                        text: '---'
                        pos_hint: {"x":0.75,"y":0.06} 
                    MDLabel:
                        text: 'Tempo part. motor:'
                        pos_hint: {"x":0.58,"y":0.02} 
                    MDLabel:
                        text: '[s]'
                        pos_hint: {"x":0.8,"y":0.02} 
                    
                    MDLabel:
                        id: t_part
                        text: '---'
                        pos_hint: {"x":0.75,"y":0.02} 
                    
                    MDLabel:
                        text: 'Num. Obj. est. 1:'
                        pos_hint: {"x":0.095,"y":-0.45} 
                    MDLabel:
                        id: numObj_est_1
                        text: '---'
                        pos_hint: {"x":0.24,"y":-0.45} 
                    MDLabel:
                        text: 'Num. Obj. est. 2:'
                        pos_hint: {"x":0.31,"y":-0.45}
                    MDLabel:
                        id: numObj_est_2
                        text: '---'
                        pos_hint: {"x":0.455,"y":-0.45} 
                    MDLabel:
                        text: 'Num. Obj. est. 3:'
                        pos_hint: {"x":0.515,"y":-0.45} 
                    MDLabel:
                        id: numObj_est_3
                        text: '---'
                        pos_hint: {"x":0.66,"y":-0.45} 
                    MDLabel:
                        text: 'Num. Obj. est. NC:'
                        pos_hint: {"x":0.725,"y":-0.45}
                    MDLabel:
                        id: numObj_est_nc
                        text: '---'
                        pos_hint: {"x":0.875,"y":-0.45} 
                    

            MDBottomNavigationItem:
                name:"data"
                text: "DADOS"
                icon: 'chart-donut'
                
                MDBoxLayout:
                    orientation: 'vertical'
                    MDFloatLayout:
                        size_hint: (1,0.6)
                        md_bg_color: 0,0,0,1
                        TimeSeriesGraph:
                            pos_hint: {"center_x":0.5,"center_y":0.5}
                            id: graph
                            size_hint: (0.982,0.95)
                            xlabel: 'Horário'
                            background_color: app.theme_cls.bg_normal
                            border_color: 0,0,0,1
                            tick_color: 0,0,0,1
                            font_size: 16
                            x_ticks_minor: 1
                            x_ticks_major: 5
                            y_ticks_major: 100
                            y_grid_label: True
                            x_grid_label: True
                            padding: 5
                            x_grid: True
                            y_grid: True
                            xmin:0
                            ymin:0
                            ymax:500
                        
                    


                    MDBoxLayout:
                        id: sensores
                        orientation: 'horizontal'
                        size_hint: (1,0.2)
                        spacing: "35dp"
                        padding: "30dp"
                    

                    MDBoxLayout:
                        orientation: 'horizontal'
                        size_hint:(1,0.1)
                        pos_hint: {"x":-0.04}
                        MDLabel:
                            text: 'Timestamp Inicial'
                            halign: 'center'
                            markup: True

                            pos_hint: {"y":.3}
                        MDTextField:
                            id: txt_init_time
                            size_hint: (1,0.8)
                            hint_text: "DD/MM/AAAA HH:MM:SS"
                            halign: 'center'

                            multiline: False
                            mode: "rectangle"
                            theme_text_color: "Custom"

                            pos_hint: {"y":0.5}
                        
                        MDLabel:
                            text: 'Timestamp Final'
                            halign: 'center'
                            markup: True
                  
 
                            pos_hint: {"y":.3}
                        MDTextField:
                            id: txt_final_time
                            hint_text: "DD/MM/AAAA HH:MM:SS"
                            size_hint: (1,0.8)
                            halign: 'center'
                            mode: "rectangle"
                            multiline: False
                  
                            pos_hint: {"y":0.5}
                        MDIconButton:
                            icon:'calendar-clock'
                            pos_hint: {"center_x":0.6,"center_y":0.83}
                            user_font_size: "48sp"
                            on_release: root.show_date_picker()
                        
                       
                        


            MDBottomNavigationItem:
                name:"con"
                text: "CONEXÃO"
                icon: 'download-network-outline'
                MDBoxLayout:
                    orientation: 'vertical'
                    padding: "20dp"
                    spacing: "50dp"
                    Image: 
                        source: "img/4124_APL_MODBUS.png"
                        pos_hint: {"center_x":0.5,"center_y":0.5}
                        size_hint:(1,0.2)
                    MDTextField:
                        id: hostname
                        text:"127.0.0.1"
                        hint_text: "Endereço IP"
                        size_hint: (0.2, None)
                        height: "50dp"
                        pos_hint: {"center_x":0.5,"center_y":0.5}
                    MDTextField:
                        id: port
                        text:"502"
                        hint_text: "Porta"
                        size_hint: (0.2, None)
                        height: "50dp"
                        pos_hint: {"center_x":0.5,"center_y":0.5}
                    MDRoundFlatIconButton:
                        id: bt_con
                        text: "CONECTAR"
                        icon: 'download-network-outline'
                        line_width: 1.25
                        theme_text_color: "Custom"
                        icon_color: 'green'
                        line_color: 'green'
                        text_color: 'green'
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        on_release: root.connect()



            MDBottomNavigationItem:
                name:"config"
                text: "CONFIGURAÇÕES"
                icon: 'cog'
                MDBoxLayout:
                    orientation: 'vertical'
                    padding: "10dp"
                    spacing: "20dp"
                    MDFloatLayout:
                        size_hint: (1, 0.15)
                        MDRoundFlatIconButton:
                        
                            text: "Temas"
                            icon: 'palette'
                            line_width: 1.25
                            theme_text_color: "Custom"
                            icon_color: app.theme_cls.accent_color
                            line_color: app.theme_cls.accent_color
                            text_color: app.theme_cls.accent_color
                            pos_hint: {'center_x': 0.95, 'center_y': 0.7}
                            on_release: root.show_theme_picker()
                        MDTextField:
                            id: scan_time
                            text:"1000"
                            font_size: 22
                            hint_text: "Scan Time (ms)"
                            size_hint: (0.2, None)
                            height: "50dp"
                            pos_hint: {"center_x":0.2,"center_y":-0.2}
                        MDTextField:
                            id: frequenciadesejada
                            text:"60"
                            font_size: 22
                            hint_text: "Frequência Desejada"
                            size_hint: (0.2, None)
                            height: "50dp"
                            pos_hint: {"center_x":0.5,"center_y":-0.2}
                        MDTextField:
                            id: tempopartida
                            text:"3"
                            font_size: 22
                            hint_text: "Tempo de Partida do Motor (s)"
                            size_hint: (0.2, None)
                            height: "50dp"
                            pos_hint: {"center_x":0.8,"center_y":-0.2}
                        MDSeparator:
                            pos_hint: {"center_y":-2}
                            size_hint: (1.1,None)
                        MDSeparator:
                            pos_hint: {"center_y":-6.8}
                            size_hint: (1.1,None)
                    
                        

                    MDBoxLayout:
                        orientation:'horizontal'
                        padding: "10dp"
                        spacing: "20dp"
                    
                        MDFloatLayout:
                            
                            size_hint: (1,0.7)

                            MDLabel:
                                text: "Esteira 1"
                                bold: True
                                font_size: 24
                                pos_hint:{"center_x":0.85,"center_y":1}

                            Check:
                                id:FiltroPesoest1
                                active:False
                                group: "1"
                                pos_hint:{"center_x":0.42,"center_y":0.8}
                            MDLabel:
                                text: "Peso"
                                pos_hint:{"center_x":0.55,"center_y":0.8}
                            Check:
                                id: FiltroCorest1
                                active: False
                                group: "1"
                                pos_hint:{"center_x":0.9,"center_y":0.8}
                            MDLabel:
                                text: "Cor"
                                pos_hint:{"center_x":1.05,"center_y":0.8}
                            
                                

                            
                                
                            MDTextField:
                                id: filtropesoesteira1
                                text:"1"
                                hint_text: "Peso (kg)"
                                size_hint: (0.4, None)
                                height: "50dp"
                                pos_hint: {"center_x":0.25,"center_y":0.45}
                                
                            MDSeparator:
                                orientation:'vertical'
                                size_hint: (None, 0.8)
                                pos_hint: {"center_x":0.5,"center_y":0.5}
                                
                                
                            
                                
                            MDLabel:
                                text: 'Vermelho'
                                pos_hint: {"center_x":1.05,"center_y":0.6}
                            MDSwitch:
                                id: filtrovermelhoesteira1
                                pos_hint: {"center_x":0.9,"center_y":0.6}
                            MDLabel:
                                text: 'Verde'
                                pos_hint: {"center_x":1.05,"center_y":0.45}
                            MDSwitch:
                                id: filtroverdeesteira1
                                pos_hint: {"center_x":0.9,"center_y":0.45}
                            MDLabel:
                                text: 'Azul'
                                pos_hint: {"center_x":1.05,"center_y":0.3}
                            MDSwitch:
                                id: filtroazulesteira1
                                pos_hint: {"center_x":0.9,"center_y":0.3}
                        MDSeparator:
                            orientation:'vertical'
                            size_hint: (None, 0.75)          
                            
                        MDFloatLayout:
                            
                            size_hint: (1,0.7)

                            MDLabel:
                                text: "Esteira 2"
                                bold: True
                                font_size: 24
                                pos_hint:{"center_x":0.85,"center_y":1}

                            Check:
                                id:FiltroPesoest2
                                active:False
                                group: "2"
                                pos_hint:{"center_x":0.42,"center_y":0.8}
                            MDLabel:
                                text: "Peso"
                                pos_hint:{"center_x":0.55,"center_y":0.8}
                            Check:
                                id: FiltroCorest2
                                active: False
                                group: "2"
                                pos_hint:{"center_x":0.9,"center_y":0.8}
                            MDLabel:
                                text: "Cor"
                                pos_hint:{"center_x":1.05,"center_y":0.8}
                            
                                

                            
                                
                            MDTextField:
                                id: filtropesoesteira2
                                text:"1"
                                hint_text: "Peso (kg)"
                                size_hint: (0.4, None)
                                height: "50dp"
                                pos_hint: {"center_x":0.25,"center_y":0.45}
                                
                            MDSeparator:
                                orientation:'vertical'
                                size_hint: (None, 0.8)
                                pos_hint: {"center_x":0.5,"center_y":0.5}
                                
                                
                            
                                
                            MDLabel:
                                text: 'Vermelho'
                                pos_hint: {"center_x":1.05,"center_y":0.6}
                            MDSwitch:
                                id: filtrovermelhoesteira2
                                pos_hint: {"center_x":0.9,"center_y":0.6}
                            MDLabel:
                                text: 'Verde'
                                pos_hint: {"center_x":1.05,"center_y":0.45}
                            MDSwitch:
                                id: filtroverdeesteira2
                                pos_hint: {"center_x":0.9,"center_y":0.45}
                            MDLabel:
                                text: 'Azul'
                                pos_hint: {"center_x":1.05,"center_y":0.3}
                            MDSwitch:
                                id: filtroazulesteira2
                                pos_hint: {"center_x":0.9,"center_y":0.3}
                        MDSeparator:
                            orientation:'vertical'
                            size_hint: (None, 0.75)


                        MDFloatLayout:
                            
                            size_hint: (1,0.7)

                            MDLabel:
                                text: "Esteira 3"
                                bold: True
                                font_size: 24
                                pos_hint:{"center_x":0.85,"center_y":1}

                            Check:
                                id:FiltroPesoest3
                                active:False
                                group: "3"
                                pos_hint:{"center_x":0.42,"center_y":0.8}
                            MDLabel:
                                text: "Peso"
                                pos_hint:{"center_x":0.55,"center_y":0.8}
                            Check:
                                id: FiltroCorest3
                                active: False
                                group: "3"
                                pos_hint:{"center_x":0.9,"center_y":0.8}
                            MDLabel:
                                text: "Cor"
                                pos_hint:{"center_x":1.05,"center_y":0.8}
                            
                                

                            
                                
                            MDTextField:
                                id: filtropesoesteira3
                                text:"1"
                                hint_text: "Peso (kg)"
                                size_hint: (0.4, None)
                                height: "50dp"
                                pos_hint: {"center_x":0.25,"center_y":0.45}
                                
                            MDSeparator:
                                orientation:'vertical'
                                size_hint: (None, 0.8)
                                pos_hint: {"center_x":0.5,"center_y":0.5}
                                
                                
                            
                                
                            MDLabel:
                                text: 'Vermelho'
                                pos_hint: {"center_x":1.05,"center_y":0.6}
                            MDSwitch:
                                id: filtrovermelhoesteira3
                                pos_hint: {"center_x":0.9,"center_y":0.6}
                            MDLabel:
                                text: 'Verde'
                                pos_hint: {"center_x":1.05,"center_y":0.45}
                            MDSwitch:
                                id: filtroverdeesteira3
                                pos_hint: {"center_x":0.9,"center_y":0.45}
                            MDLabel:
                                text: 'Azul'
                                pos_hint: {"center_x":1.05,"center_y":0.3}
                            MDSwitch:
                                id: filtroazulesteira3
                                pos_hint: {"center_x":0.9,"center_y":0.3}
                                

                    MDRoundFlatIconButton:
                        id: bt_salvar
                        text: "Salvar"
                        icon: 'content-save'
                        line_width: 1.25
                        theme_text_color: "Custom"
                        icon_color: 'blue'
                        line_color: 'blue'
                        text_color: 'blue'
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        on_release: root.atualizaConfig()
                    
                    


<Check@MDCheckbox>:
    size_hint: None, None
    size: dp(48), dp(48)





<LabeledCheckBoxHistGraph>:
    orientation: 'vertical'
    size_hint: (0.05,1)
    MDLabel:
        id: label
        font_size: 12
        bold: True
        theme_text_color: "Custom"
        text_color: 1,1,1,1
    
    Check:
        id: checkbox
        on_active: app.root.getDataDB()
    
            
        
    





